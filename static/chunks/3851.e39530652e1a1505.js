"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3851],{73851:function(t,e,n){n.r(e),n.d(e,{MintSteps:function(){return a},default:function(){return MintContractDemo}});var i,a,r=n(57437),s=n(2265),o=n(47331),l=n(76384),c=n(79352),u=n(18269),d=n(89412),m=n(46981),h=n(71660);async function estimateGas_estimateGas(t,e){let n;let{chainId:i,connector:a,...r}=e;if(e.account)n=e.account;else{let r=await (0,h.e)(t,{account:e.account,chainId:i,connector:a});n=r.account}let s=t.getClient({chainId:i}),o=(0,m.s)(s,d.Q,"estimateGas");return o({...r,account:n})}var f=n(21637),p=n(84855),x=n(6613),g=n(41012),b=n(15642),y=n(69394);function FallbackImage(){return(0,r.jsx)("div",{className:"flex size-full items-center justify-center bg-slate-100 ",children:(0,r.jsx)(y.XBm,{className:"font-robotoMono h-6/12 w-6/12 fill-slate-400 stroke-slate-400"})})}function SpinnerIcon(t){return(0,r.jsxs)("svg",{stroke:"currentColor",fill:"none",strokeWidth:"0",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",...t,children:[(0,r.jsx)("path",{opacity:"0.2",fillRule:"evenodd",clipRule:"evenodd",d:"M12 19C15.866 19 19 15.866 19 12C19 8.13401 15.866 5 12 5C8.13401 5 5 8.13401 5 12C5 15.866 8.13401 19 12 19ZM12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z",fill:"currentColor"}),(0,r.jsx)("path",{d:"M2 12C2 6.47715 6.47715 2 12 2V5C8.13401 5 5 8.13401 5 12H2Z",fill:"currentColor"})]})}var v=n(79801),w=n(16691),T=n.n(w);function NextImage(t){let{src:e,altText:n,className:i}=t;return(0,r.jsx)(T(),{src:e,width:0,height:0,sizes:"100vw",style:{width:"100%"},alt:n,className:i})}var C=n(87923);let N=C.L;var S=n(67663),E=n(69228);function getPublicClient(t,e={}){let n=function(t,e={}){let n;try{n=t.getClient(e)}catch{}return n}(t,e);return n?.extend(E.I)}var j=n(65401);let ipfsToHTTP=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ipfs.io";if(t.startsWith("http"))return t.replace("http://","https://");let n=t.replace("ipfs://","");return"https://".concat(e,"/ipfs/").concat(n)},getCollectionMetadataAction=async t=>{let{gatewayHostname:e,metadataURI:n}=t,i=function(t,e){try{let n=JSON.parse(t);return{name:n.name,description:n.description,image:n.image?ipfsToHTTP(n.image,e):void 0}}catch(t){}}(n,e);if(i)return i;{var a;let t=await fetch(ipfsToHTTP(n,e));if(!t.ok)throw Error("Error: ".concat(t.status));let i=await t.json();return{name:i.name,description:i.description,image:ipfsToHTTP(null!==(a=i.image)&&void 0!==a?a:"",e)}}},getIsAbiWithUriViewFunction=t=>{let e=t.find(t=>"function"===t.type&&"uri"===t.name);return!!e};var _=n(33934),P=n(97832);let M=(0,P.R)({abi:[{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"id",type:"uint256"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],name:"mint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"id",type:"uint256"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"uri",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"}],[C.L.id]:{chain:C.L,address:"0x6268A5F72528E5297e5A63B35e523E5C131cC88C"}});var I=n(57042),k=n(44818),O=n(27446),F=n(98883),A=n(47973),G=n(81446);function StepMintComplete(t){let{setMintStep:e,collectionName:n}=t,i=(0,s.useCallback)(()=>{e(a.START_MINT_STEP)},[e]);return(0,r.jsxs)("div",{className:(0,I.Z)("rounded-lg border border-boat-color-palette-line","mb-8 bg-boat-footer-dark-gray p-8"),children:[(0,r.jsxs)("h2",{className:"mb-5 w-full text-center text-2xl font-semibold text-white",children:["Congrats! You minted ",n]}),(0,r.jsx)("div",{className:"text-center text-6xl",children:"\uD83C\uDF89"}),(0,r.jsx)("div",{className:"my-4 text-center text-sm text-gray-400",children:"It will take ~ 5 minutes to show up in your wallet"}),(0,r.jsx)(G.Z,{buttonContent:"Mint another NFT",onClick:i})]})}function StepMintProcessing(){return(0,r.jsxs)("div",{className:(0,I.Z)("rounded-lg border border-boat-color-palette-line","mb-8 bg-boat-footer-dark-gray p-8"),children:[(0,r.jsx)("h2",{className:"mb-5 w-full text-center text-2xl font-semibold text-white",children:"Painting some pixels..."}),(0,r.jsx)("div",{className:"text-center text-6xl",children:"\uD83C\uDFA8"}),(0,r.jsx)("div",{className:"my-4 text-center text-sm text-gray-400",children:"Please confirm transaction in your wallet"}),(0,r.jsx)(G.Z,{buttonContent:(0,r.jsx)("span",{children:"Minting in progress"}),icon:(0,r.jsx)(y.WID,{width:15,height:15}),variant:"secondary"})]})}function StepOutOfGas(t){let{setMintStep:e}=t,n=(0,s.useCallback)(()=>{e(a.START_MINT_STEP)},[e]);return(0,r.jsxs)("div",{className:(0,I.Z)("rounded-lg border border-boat-color-palette-line","mb-8 bg-boat-footer-dark-gray p-8"),children:[(0,r.jsx)("h2",{className:"mb-5 w-full text-center text-2xl font-semibold text-white",children:"You're out of gas"}),(0,r.jsx)("div",{className:"text-center text-6xl",children:"â›½"}),(0,r.jsx)("div",{className:"my-4 text-center text-sm text-gray-400",children:"Please fund your wallet and try minting the NFT again."}),(0,r.jsx)(G.Z,{buttonContent:"Got it",onClick:n})]})}function StepStartMint(t){let{setMintStep:e,mintStep:n,collectionName:i}=t,{chain:o}=(0,u.m)(),{address:l}=(0,u.m)(),c=M(),d=(null==o?void 0:o.id)===N.id,{data:m}=(0,O.G)({address:"ready"===c.status?c.address:void 0,abi:c.abi,functionName:"mint",args:l?[l,BigInt(1),BigInt(1),l]:void 0,query:{enabled:d}}),{writeContract:h,error:f,data:p}=(0,F.S)(),{status:x}=(0,A.A)({hash:p,query:{enabled:!!p}});(0,s.useEffect)(()=>{if("success"===x&&e(a.MINT_COMPLETE_STEP),f){let t=f instanceof k.mk&&f.message.toLowerCase().includes("out of gas");e(t?a.OUT_OF_GAS_STEP:a.START_MINT_STEP)}},[x,e,f]);let g=(0,s.useCallback)(()=>{(null==m?void 0:m.request)&&(null==h||h(null==m?void 0:m.request),e(a.MINT_PROCESSING_STEP))},[m,h,e]);return(0,r.jsxs)(r.Fragment,{children:[n===a.MINT_PROCESSING_STEP&&(0,r.jsx)(StepMintProcessing,{}),n===a.OUT_OF_GAS_STEP&&(0,r.jsx)(StepOutOfGas,{setMintStep:e}),n===a.MINT_COMPLETE_STEP&&(0,r.jsx)(StepMintComplete,{setMintStep:e,collectionName:i}),n===a.START_MINT_STEP&&(0,r.jsx)(G.Z,{buttonContent:"Mint",onClick:g,disabled:!d,className:(0,I.Z)("my-4",d?"bg-white":"bg-gray-400")})]})}var R=n(23588),Z=n(76026),q=n(29358);async function switchChain(t,e){let{addEthereumChainParameter:n,chainId:i}=e,a=t.state.connections.get(e.connector?.uid??t.state.current);if(a){let t=a.connector;if(!t.switchChain)throw new q.O({connector:t});let e=await t.switchChain({addEthereumChainParameter:n,chainId:i});return e}let r=t.chains.find(t=>t.id===i);if(!r)throw new Z.X4;return t.setState(t=>({...t,chainId:i})),r}var L=n(48369);let B=[];function getChains(t){let e=t.chains;return(0,L.v)(B,e)?B:(B=e,e)}var _components_SwitchNetwork=function(){let{switchChain:t}=function(t={}){let{mutation:e}=t,n=(0,g.Z)(t),{mutate:i,mutateAsync:a,...r}=(0,R.D)({...e,mutationFn:t=>switchChain(n,t),mutationKey:["switchChain"]});return{...r,chains:function(t={}){let e=(0,g.Z)(t);return(0,s.useSyncExternalStore)(t=>(function(t,e){let{onChange:n}=e;return t._internal.chains.subscribe((t,e)=>{n(t,e)})})(e,{onChange:t}),()=>getChains(e),()=>getChains(e))}({config:n}),switchChain:i,switchChainAsync:a}}(),e=(0,s.useCallback)(()=>null==t?void 0:t({chainId:N.id}),[t]);return(0,r.jsxs)("div",{className:"flex flex-col justify-start",children:[(0,r.jsxs)("p",{className:"text-sm",children:["Please switch to ",N.name]}),(0,r.jsx)("button",{type:"button",onClick:e,children:"Switch Network"})]})};function MintContractDemo(){var t;let[e,n]=(0,s.useState)(0),{chain:i,address:a,isConnected:d}=(0,u.m)(),m=M(),h=null!=i?i:(0,_.iV)().find(t=>N.id===t.id),y=(null==h?void 0:h.id)===N.id,{data:w,isLoading:T}=function(t){let{tokenId:e=1n,address:n,enabled:i,abi:a,chainId:r,gatewayHostname:s,cacheTime:o}=t,{chain:l}=(0,u.m)(),c=null!=r?r:null==l?void 0:l.id,d=function(t={}){let e=(0,g.Z)(t);return(0,j.useSyncExternalStoreWithSelector)(t=>(function(t,e){let{onChange:n}=e;return t.subscribe(()=>getPublicClient(t),n,{equalityFn:(t,e)=>t?.uid===e?.uid})})(e,{onChange:t}),()=>getPublicClient(e,t),()=>getPublicClient(e,t),t=>t,(t,e)=>t?.uid===e?.uid)}({chainId:c});return(0,S.a)({queryKey:["useCollectionMetadata",n,c],queryFn:async()=>{if(!d||!n)throw Error("Public client not available or address not provided");if(!getIsAbiWithUriViewFunction(a))throw Error("ABI does not have a `uri` view function");let t=await d.readContract({abi:a,functionName:"uri",address:n,args:[e]});return await getCollectionMetadataAction({metadataURI:t,gatewayHostname:s})},refetchOnWindowFocus:!1,enabled:i&&!!c,gcTime:o})}({enabled:y,address:"ready"===m.status?m.address:void 0,abi:m.abi,chainId:N.id}),{name:C,description:E,image:P}=null!=w?w:{},{data:I,isLoading:k}=function(t={}){let{connector:e,query:n={}}=t,i=(0,g.Z)(t),{data:a}=(0,b.L)({connector:e,query:{enabled:void 0===t.account}}),r=t.account??a?.account,s=(0,x.x)({config:i}),o=function(t,e={}){return{async queryFn({queryKey:n}){let{connector:i}=e,{account:a,scopeKey:r,...s}=n[1];if(!a&&!i)throw Error("account or connector is required");return estimateGas_estimateGas(t,{account:a,connector:i,...s})},queryKey:function(t={}){let{connector:e,...n}=t;return["estimateGas",(0,f.OP)(n)]}(e)}}(i,{...t,account:r,chainId:t.chainId??s,connector:e}),l=!!((r||e)&&(n.enabled??!0));return(0,p.aM)({...n,...o,enabled:l})}({to:"ready"===m.status?m.address:void 0,account:a,chainId:null==h?void 0:h.id,data:a?(0,l.R)({abi:m.abi,functionName:"mint",args:[a,BigInt(1),BigInt(1),a]}):void 0,query:{enabled:y&&!!a}}),O=I?(0,c.d)(I,"gwei"):"Unknown",F=null!=C?C:"ready"===m.status?"Collection: ".concat((0,o.oY)({address:m.address,showAddress:!0})):"";return T?(0,r.jsx)("div",{className:"my-5 flex justify-center align-middle",children:(0,r.jsx)("span",{className:"text-xl",children:(0,r.jsx)(SpinnerIcon,{className:"h-20 w-20 animate-spin"})})}):(0,r.jsxs)("div",{className:"gap-16 lg:flex",children:[(0,r.jsx)("div",{className:"w-full flex-shrink-0 flex-grow lg:max-w-[400px] xl:max-w-[600px]",children:P?(0,r.jsx)(NextImage,{src:P,altText:F,className:"block w-full rounded-2xl"}):(0,r.jsx)(FallbackImage,{})}),(0,r.jsxs)("div",{className:"flex-shrink-1 mt-10 w-full flex-grow-0 lg:mt-0",children:[(0,r.jsx)("h1",{className:"text-4xl font-bold",children:F}),d&&(0,r.jsxs)("h2",{className:"my-5",children:["Estimated tx fee:"," ",k?(0,r.jsx)(SpinnerIcon,{className:"inline animate-spin",height:"1.2rem",width:"1.2rem"}):(0,r.jsxs)(r.Fragment,{children:[O,null!==(t=null==h?void 0:h.nativeCurrency.symbol)&&void 0!==t?t:"ETH"]})]}),(0,r.jsx)("p",{className:"mb-6 mt-4 text-sm text-boat-footer-light-gray",children:E}),"onUnsupportedNetwork"===m.status&&(0,r.jsx)(_components_SwitchNetwork,{}),d?(0,r.jsx)(StepStartMint,{setMintStep:n,mintStep:e,collectionName:F}):(0,r.jsx)(v.Z,{})]})]})}(i=a||(a={}))[i.START_MINT_STEP=0]="START_MINT_STEP",i[i.MINT_PROCESSING_STEP=1]="MINT_PROCESSING_STEP",i[i.OUT_OF_GAS_STEP=2]="OUT_OF_GAS_STEP",i[i.MINT_COMPLETE_STEP=3]="MINT_COMPLETE_STEP"},81446:function(t,e,n){n.d(e,{Z:function(){return Button}});var i=n(57437),a=n(57042);function Button(t){let{buttonContent:e,type:n="button",className:r,onClick:s,variant:o="primary",disabled:l=!1,icon:c,rounded:u=!0}=t;return(0,i.jsxs)("button",{type:n,onClick:s,className:(0,a.Z)("flex w-full items-center justify-center","py-4 text-sm","primary"===o?"bg-white":"bg-black","primary"===o?"text-black":"text-white",l&&"primary"===o?"bg-gray-400":null,l&&"secondary"===o?"bg-boat-color-gray-900":null,u?"rounded-full":null,r),disabled:l,children:[c?(0,i.jsx)("span",{className:"mr-2",children:c}):null,e]})}},97832:function(t,e,n){n.d(e,{R:function(){return generateContractHook}});var i=n(18269),a=n(33934);function generateContractHook(t){let{abi:e,...n}=t;return function(){let{chain:t}=(0,i.m)(),r=Object.values(n).map(t=>t.chain),s=null!=t?t:r.find(t=>(0,a.iV)().some(e=>t.id===e.id));return s&&s.id in n?n[s.id].deactivated?{abi:e,status:"deactivated",supportedChains:r}:{abi:e,address:n[s.id].address,status:"ready",supportedChains:r}:{abi:e,status:"onUnsupportedNetwork",supportedChains:r}}}},39485:function(t,e,n){n.d(e,{_F:function(){return getCurrentEnvironment},qA:function(){return a}});var i,a,r,s=n(25566);function getCurrentEnvironment(){let t=s.env.NEXT_PUBLIC_ENVIRONMENT;if(void 0===t)return"localhost";let e=Object.values(a).find(e=>e===t);return null!=e?e:"localhost"}(i=a||(a={})).localhost="localhost",i.development="development",i.staging="staging",i.production="production",(r||(r={})).environment="NEXT_PUBLIC_ENVIRONMENT"},33934:function(t,e,n){n.d(e,{iV:function(){return getChainsForEnvironment}});var i=n(87923),a=n(35085),r=n(39485);let s={[r.qA.localhost]:[i.L],[r.qA.development]:[i.L],[r.qA.staging]:[a.u,i.L],[r.qA.production]:[a.u,i.L]};function getChainsForEnvironment(t){return t||(t=(0,r._F)()),s[t]}},29358:function(t,e,n){n.d(e,{M:function(){return ProviderNotFoundError},O:function(){return SwitchChainNotSupportedError}});var i=n(78306);let ProviderNotFoundError=class ProviderNotFoundError extends i.G{constructor(){super("Provider not found."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ProviderNotFoundError"})}};let SwitchChainNotSupportedError=class SwitchChainNotSupportedError extends i.G{constructor({connector:t}){super(`"${t.name}" does not support programmatic chain switching.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SwitchChainNotSupportedError"})}}}}]);