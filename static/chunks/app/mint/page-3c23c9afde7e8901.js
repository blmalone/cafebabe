(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3384],{35826:function(e,t,n){Promise.resolve().then(n.bind(n,70751))},70751:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return MintPage}});var l=n(57437),i=n(28811),s=n.n(i),o=n(87196),a=n(46522),c=n(52630),r=n(2265),d=n(54104),u=n(50096);function Guide(){(0,u.Bn)();let e=(0,r.useMemo)(()=>[{href:"#contract-summary",label:"Contract Summary"},{href:"#publicMint-explanation",label:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("code",{className:"text-xs",children:"publicMint"})," Explanation"]})}],[]);return(0,l.jsxs)("div",{children:[(0,l.jsx)(u.H3,{id:"guide",children:"Guide"}),(0,l.jsxs)("div",{className:"gap-16 lg:flex",children:[(0,l.jsxs)("main",{className:"w-full flex-shrink-0 flex-grow xl:max-w-[900px]",children:[(0,l.jsx)(u.Hr,{}),(0,l.jsxs)(u.$0,{id:"contract-summary",children:[(0,l.jsx)(u.H4,{children:"Contract Summary"}),(0,l.jsxs)(u.P,{children:["The ",(0,l.jsx)("code",{children:"AllowlistNFT.sol"})," smart contract is an extension of an ERC721 smart contract. The ",(0,l.jsx)(u.A,{href:"https://github.com/chiru-labs/ERC721A",children:"ERC721A"})," ","implementation is an extension of the"," ",(0,l.jsx)(u.A,{href:"https://eips.ethereum.org/EIPS/eip-721",children:"ERC721 specification"}),", and is optimized for gas savings and batch operations."]})]}),(0,l.jsxs)(u.$0,{id:"publicMint-explanation",children:[(0,l.jsxs)(u.H4,{children:[(0,l.jsx)("code",{className:"text-xl",children:"publicMint"})," Explanation"]}),(0,l.jsxs)(u.P,{children:["The ",(0,l.jsx)("code",{children:"publicMint"})," function allows anyone to mint an NFT from the contract so long as the mint is"," ",(0,l.jsx)(u.A,{href:"https://github.com/coinbase/build-onchAin-apps/blob/v0.18.0/template/contracts/src/AllowlistNFT.sol#L131",children:"live"})," ","and the allowlist time period"," ",(0,l.jsx)(u.A,{href:"https://github.com/coinbase/build-onchain-apps/blob/v0.18.0/template/contracts/src/AllowlistNFT.sol#L132",children:"has elapsed"}),"."]}),(0,l.jsx)(d.Z,{code:"```solidity\nfunction publicMint(uint256 _amount) external payable whenLive {\n  if (block.timestamp < allowlistClose) revert PublicMintNotLive();\n  ...\n}",language:"solidity"}),(0,l.jsxs)(u.P,{children:["The above conditions correspond to the"," ",(0,l.jsx)(u.A,{href:"https://github.com/coinbase/build-onchain-apps/blob/v0.18.0/template/contracts/src/AllowlistNFT.sol#L38",children:(0,l.jsx)("code",{children:"live"})})," ","and"," ",(0,l.jsx)(u.A,{href:"https://github.com/coinbase/build-onchain-apps/blob/v0.18.0/template/contracts/src/AllowlistNFT.sol#L42",children:(0,l.jsx)("code",{children:"allowlistClose"})})," ","variables, respectively. These values are stored as state variables in the contract, and are set in the"," ",(0,l.jsx)(u.A,{href:"https://github.com/coinbase/build-onchain-apps/blob/v0.18.0/template/contracts/src/AllowlistNFT.sol#L76",children:(0,l.jsx)("code",{children:"constructor"})}),"."]}),(0,l.jsxs)(u.P,{children:["The modifier"," ",(0,l.jsx)(u.A,{href:"https://github.com/coinbase/build-onchain-apps/blob/v0.18.0/template/contracts/src/AllowlistNFT.sol#L57",children:(0,l.jsx)("code",{children:"whenLive"})})," ","is attached to the ",(0,l.jsx)("code",{children:"publicMint"})," function, which checks the value of the"," ",(0,l.jsx)("code",{children:"live"})," state variable to determine whether to revert the transaction or not."]}),(0,l.jsx)(d.Z,{code:"```solidity\nmodifier whenLive() {\n    if (!live) revert MintNotLive();\n    _;\n}",language:"solidity"}),(0,l.jsxs)(u.P,{children:["The owner of the contract can call the"," ",(0,l.jsx)(u.A,{href:"https://github.com/coinbase/build-onchain-apps/blob/v0.18.0/template/contracts/src/AllowlistNFT.sol#L160",children:"toggleLive"})," ","function to flip the boolean value of live, thus enabling and disabling minting NFTs."]}),(0,l.jsxs)(u.P,{children:["Assuming ",(0,l.jsx)("code",{children:"live"})," is set to true, the ",(0,l.jsx)("code",{children:"publicMint"})," function will then ensure that the timestamp of the block being mined is"," ",(0,l.jsx)(u.A,{href:"https://github.com/coinbase/build-onchain-apps/blob/v0.18.0/template/contracts/src/AllowlistNFT.sol#L132",children:"greater than"})," ","the timestamp stored in ",(0,l.jsx)("code",{children:"allowlistClose"}),". Otherwise, the transaction will revert."]}),(0,l.jsx)(d.Z,{code:"```solidity\nif (block.timestamp < allowlistClose) revert PublicMintNotLive();\n",language:"solidity"}),(0,l.jsxs)(u.P,{children:["If the above check succeeds, then the requested number of NFTs to mint will be calculated and added to the total number of NFTs the caller (",(0,l.jsx)("code",{children:"msg.sender"}),") has minted previously. If this new total exceeds the maximum allowed NFTs to mint"," ",(0,l.jsx)(u.A,{href:"https://github.com/coinbase/build-onchain-apps/blob/v0.18.0/template/contracts/src/AllowlistNFT.sol#L139",children:"per-person"})," ","or"," ",(0,l.jsx)(u.A,{href:"https://github.com/coinbase/build-onchain-apps/blob/v0.18.0/template/contracts/src/AllowlistNFT.sol#L140",children:"globally"}),", then the transaction will revert."]}),(0,l.jsx)(d.Z,{code:"```solidity\nuint256 minted = _numberMinted(msg.sender) + _amount;\nif (minted > maxPublicMint) revert MintExceeded();\nif (_totalMinted() + _amount > MAX_SUPPLY) revert SupplyExceeded();\n",language:"solidity"}),(0,l.jsxs)(u.P,{children:["Then, the function will check the supplied amount of ETH (",(0,l.jsx)("code",{children:"msg.value"}),") to ensure that"," ",(0,l.jsx)(u.A,{href:"https://github.com/coinbase/build-onchain-apps/blob/v0.18.0/template/contracts/src/AllowlistNFT.sol#L141",children:"enough ETH has been provided"})," ","to mint the requested number of NFTs at the current price."]}),(0,l.jsx)(d.Z,{code:"```solidity\nif (msg.value != _amount * price) revert InsufficientPayment();\n",language:"solidity"}),(0,l.jsxs)(u.P,{children:["Assuming all these checks succeed, ",(0,l.jsx)("code",{children:"publicMint"})," will then"," ",(0,l.jsx)(u.A,{href:"https://github.com/coinbase/build-onchain-apps/blob/v0.18.0/template/contracts/src/AllowlistNFT.sol#L143",children:"mint"})," ","the specified amount of NFTs to the caller address."]}),(0,l.jsx)(d.Z,{code:"```solidity\n_mint(msg.sender, _amount);\n",language:"solidity"})]})]}),(0,l.jsx)(u.o5,{title:"Guide",contents:e})]})]})}let h=s()(async()=>Promise.all([n.e(2970),n.e(3851)]).then(n.bind(n,73851)).then(e=>e),{loadableGenerated:{webpack:()=>[73851]},ssr:!1});function MintPage(){return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(a.Z,{}),(0,l.jsxs)(c.Z,{children:[(0,l.jsx)(o.Z,{pageName:"Mint NFT",pageUrl:"mint"}),(0,l.jsx)(h,{}),(0,l.jsx)(Guide,{})]})]})}},28811:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return dynamic}});let l=n(21024);n(2265);let i=l._(n(57075));function convertModule(e){return{default:(null==e?void 0:e.default)||e}}function dynamic(e,t){let n=i.default,l={loading:e=>{let{error:t,isLoading:n,pastDelay:l}=e;return null}};"function"==typeof e&&(l.loader=e),Object.assign(l,t);let s=l.loader;return n({...l,loader:()=>null!=s?s().then(convertModule):Promise.resolve(convertModule(()=>null))})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},19167:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{suspense:function(){return suspense},NoSSR:function(){return NoSSR}});let l=n(11283);function suspense(){let e=Error(l.NEXT_DYNAMIC_NO_SSR_CODE);throw e.digest=l.NEXT_DYNAMIC_NO_SSR_CODE,e}function NoSSR(e){let{children:t}=e;return t}},57075:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return _default}});let l=n(21024),i=l._(n(2265)),s=n(19167),_default=function(e){let t=Object.assign({loader:null,loading:null,ssr:!0},e);function LoadableComponent(e){let n=t.loading,l=i.default.createElement(n,{isLoading:!0,pastDelay:!0,error:null}),o=t.ssr?i.default.Fragment:s.NoSSR,a=t.lazy;return i.default.createElement(i.default.Suspense,{fallback:l},i.default.createElement(o,null,i.default.createElement(a,e)))}return t.lazy=i.default.lazy(t.loader),LoadableComponent.displayName="LoadableComponent",LoadableComponent}}},function(e){e.O(0,[8310,2483,7133,9971,6391,4971,2971,2472,1744],function(){return e(e.s=35826)}),_N_E=e.O()}]);