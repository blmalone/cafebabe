"use strict";exports.id=9456,exports.ids=[9456],exports.modules={89456:(t,e,n)=>{n.r(e),n.d(e,{MintSteps:()=>a,default:()=>MintContractDemo});var a,i=n(30784),s=n(9885),r=n(23716),l=n(98698),o=n(38430),c=n(31004),d=n(71157),u=n(79130);function FallbackImage(){return i.jsx("div",{className:"flex size-full items-center justify-center bg-slate-100 ",children:i.jsx(u.XBm,{className:"font-robotoMono h-6/12 w-6/12 fill-slate-400 stroke-slate-400"})})}function SpinnerIcon(t){return(0,i.jsxs)("svg",{stroke:"currentColor",fill:"none",strokeWidth:"0",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",...t,children:[i.jsx("path",{opacity:"0.2",fillRule:"evenodd",clipRule:"evenodd",d:"M12 19C15.866 19 19 15.866 19 12C19 8.13401 15.866 5 12 5C8.13401 5 5 8.13401 5 12C5 15.866 8.13401 19 12 19ZM12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z",fill:"currentColor"}),i.jsx("path",{d:"M2 12C2 6.47715 6.47715 2 12 2V5C8.13401 5 5 8.13401 5 12H2Z",fill:"currentColor"})]})}var m=n(45397),x=n(52451),p=n.n(x);function NextImage({src:t,altText:e,className:n}){return i.jsx(p(),{src:t,width:0,height:0,sizes:"100vw",style:{width:"100%"},alt:e,className:n})}var h=n(38323);let f=h.L;var b=n(32923),y=n(52371);let ipfsToHTTP=function(t,e="ipfs.io"){if(t.startsWith("http"))return t.replace("http://","https://");let n=t.replace("ipfs://","");return`https://${e}/ipfs/${n}`},getCollectionMetadataAction=async({gatewayHostname:t,metadataURI:e})=>{let n=function(t,e){try{let n=JSON.parse(t);return{name:n.name,description:n.description,image:n.image?ipfsToHTTP(n.image,e):void 0}}catch{}}(e,t);if(n)return n;{let n=await fetch(ipfsToHTTP(e,t));if(!n.ok)throw Error(`Error: ${n.status}`);let a=await n.json();return{name:a.name,description:a.description,image:ipfsToHTTP(a.image??"",t)}}},getIsAbiWithUriViewFunction=t=>{let e=t.find(t=>"function"===t.type&&"uri"===t.name);return!!e};var T=n(61088),g=n(22068);let N=(0,g.R)({abi:[{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"id",type:"uint256"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],name:"mint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"id",type:"uint256"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"uri",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"}],[h.L.id]:{chain:h.L,address:"0x6268A5F72528E5297e5A63B35e523E5C131cC88C"}});var w=n(10566),S=n(91105),j=n(8225),C=n(58312),_=n(76091),v=n(90226);function StepMintComplete({setMintStep:t,collectionName:e}){let n=(0,s.useCallback)(()=>{t(a.START_MINT_STEP)},[t]);return(0,i.jsxs)("div",{className:(0,w.Z)("rounded-lg border border-boat-color-palette-line","mb-8 bg-boat-footer-dark-gray p-8"),children:[(0,i.jsxs)("h2",{className:"mb-5 w-full text-center text-2xl font-semibold text-white",children:["Congrats! You minted ",e]}),i.jsx("div",{className:"text-center text-6xl",children:"\uD83C\uDF89"}),i.jsx("div",{className:"my-4 text-center text-sm text-gray-400",children:"It will take ~ 5 minutes to show up in your wallet"}),i.jsx(v.Z,{buttonContent:"Mint another NFT",onClick:n})]})}function StepMintProcessing(){return(0,i.jsxs)("div",{className:(0,w.Z)("rounded-lg border border-boat-color-palette-line","mb-8 bg-boat-footer-dark-gray p-8"),children:[i.jsx("h2",{className:"mb-5 w-full text-center text-2xl font-semibold text-white",children:"Painting some pixels..."}),i.jsx("div",{className:"text-center text-6xl",children:"\uD83C\uDFA8"}),i.jsx("div",{className:"my-4 text-center text-sm text-gray-400",children:"Please confirm transaction in your wallet"}),i.jsx(v.Z,{buttonContent:i.jsx("span",{children:"Minting in progress"}),icon:i.jsx(u.WID,{width:15,height:15}),variant:"secondary"})]})}function StepOutOfGas({setMintStep:t}){let e=(0,s.useCallback)(()=>{t(a.START_MINT_STEP)},[t]);return(0,i.jsxs)("div",{className:(0,w.Z)("rounded-lg border border-boat-color-palette-line","mb-8 bg-boat-footer-dark-gray p-8"),children:[i.jsx("h2",{className:"mb-5 w-full text-center text-2xl font-semibold text-white",children:"You're out of gas"}),i.jsx("div",{className:"text-center text-6xl",children:"â›½"}),i.jsx("div",{className:"my-4 text-center text-sm text-gray-400",children:"Please fund your wallet and try minting the NFT again."}),i.jsx(v.Z,{buttonContent:"Got it",onClick:e})]})}function StepStartMint({setMintStep:t,mintStep:e,collectionName:n}){let{chain:r}=(0,c.m)(),{address:l}=(0,c.m)(),o=N(),d=r?.id===f.id,{data:u}=(0,j.G)({address:"ready"===o.status?o.address:void 0,abi:o.abi,functionName:"mint",args:l?[l,BigInt(1),BigInt(1),l]:void 0,query:{enabled:d}}),{writeContract:m,error:x,data:p}=(0,C.S)(),{status:h}=(0,_.A)({hash:p,query:{enabled:!!p}});(0,s.useEffect)(()=>{if("success"===h&&t(a.MINT_COMPLETE_STEP),x){let e=x instanceof S.mk&&x.message.toLowerCase().includes("out of gas");t(e?a.OUT_OF_GAS_STEP:a.START_MINT_STEP)}},[h,t,x]);let b=(0,s.useCallback)(()=>{u?.request&&(m?.(u?.request),t(a.MINT_PROCESSING_STEP))},[u,m,t]);return(0,i.jsxs)(i.Fragment,{children:[e===a.MINT_PROCESSING_STEP&&i.jsx(StepMintProcessing,{}),e===a.OUT_OF_GAS_STEP&&i.jsx(StepOutOfGas,{setMintStep:t}),e===a.MINT_COMPLETE_STEP&&i.jsx(StepMintComplete,{setMintStep:t,collectionName:n}),e===a.START_MINT_STEP&&i.jsx(v.Z,{buttonContent:"Mint",onClick:b,disabled:!d,className:(0,w.Z)("my-4",d?"bg-white":"bg-gray-400")})]})}var M=n(22670);let _components_SwitchNetwork=function(){let{switchChain:t}=(0,M.o)(),e=(0,s.useCallback)(()=>t?.({chainId:f.id}),[t]);return(0,i.jsxs)("div",{className:"flex flex-col justify-start",children:[(0,i.jsxs)("p",{className:"text-sm",children:["Please switch to ",f.name]}),i.jsx("button",{type:"button",onClick:e,children:"Switch Network"})]})};function MintContractDemo(){let[t,e]=(0,s.useState)(0),{chain:n,address:a,isConnected:u}=(0,c.m)(),x=N(),p=n??(0,T.iV)().find(t=>f.id===t.id),h=p?.id===f.id,{data:g,isLoading:w}=function({tokenId:t=1n,address:e,enabled:n,abi:a,chainId:i,gatewayHostname:s,cacheTime:r}){let{chain:l}=(0,c.m)(),o=i??l?.id,d=(0,y.t)({chainId:o});return(0,b.a)({queryKey:["useCollectionMetadata",e,o],queryFn:async()=>{if(!d||!e)throw Error("Public client not available or address not provided");if(!getIsAbiWithUriViewFunction(a))throw Error("ABI does not have a `uri` view function");let n=await d.readContract({abi:a,functionName:"uri",address:e,args:[t]});return await getCollectionMetadataAction({metadataURI:n,gatewayHostname:s})},refetchOnWindowFocus:!1,enabled:n&&!!o,gcTime:r})}({enabled:h,address:"ready"===x.status?x.address:void 0,abi:x.abi,chainId:f.id}),{name:S,description:j,image:C}=g??{},{data:_,isLoading:v}=(0,d.N)({to:"ready"===x.status?x.address:void 0,account:a,chainId:p?.id,data:a?(0,l.R)({abi:x.abi,functionName:"mint",args:[a,BigInt(1),BigInt(1),a]}):void 0,query:{enabled:h&&!!a}}),M=_?(0,o.d)(_,"gwei"):"Unknown",E=S??("ready"===x.status?`Collection: ${(0,r.oY)({address:x.address,showAddress:!0})}`:"");return w?i.jsx("div",{className:"my-5 flex justify-center align-middle",children:i.jsx("span",{className:"text-xl",children:i.jsx(SpinnerIcon,{className:"h-20 w-20 animate-spin"})})}):(0,i.jsxs)("div",{className:"gap-16 lg:flex",children:[i.jsx("div",{className:"w-full flex-shrink-0 flex-grow lg:max-w-[400px] xl:max-w-[600px]",children:C?i.jsx(NextImage,{src:C,altText:E,className:"block w-full rounded-2xl"}):i.jsx(FallbackImage,{})}),(0,i.jsxs)("div",{className:"flex-shrink-1 mt-10 w-full flex-grow-0 lg:mt-0",children:[i.jsx("h1",{className:"text-4xl font-bold",children:E}),u&&(0,i.jsxs)("h2",{className:"my-5",children:["Estimated tx fee:"," ",v?i.jsx(SpinnerIcon,{className:"inline animate-spin",height:"1.2rem",width:"1.2rem"}):(0,i.jsxs)(i.Fragment,{children:[M,p?.nativeCurrency.symbol??"ETH"]})]}),i.jsx("p",{className:"mb-6 mt-4 text-sm text-boat-footer-light-gray",children:j}),"onUnsupportedNetwork"===x.status&&i.jsx(_components_SwitchNetwork,{}),u?i.jsx(StepStartMint,{setMintStep:e,mintStep:t,collectionName:E}):i.jsx(m.Z,{})]})]})}!function(t){t[t.START_MINT_STEP=0]="START_MINT_STEP",t[t.MINT_PROCESSING_STEP=1]="MINT_PROCESSING_STEP",t[t.OUT_OF_GAS_STEP=2]="OUT_OF_GAS_STEP",t[t.MINT_COMPLETE_STEP=3]="MINT_COMPLETE_STEP"}(a||(a={}))},90226:(t,e,n)=>{n.d(e,{Z:()=>Button});var a=n(30784),i=n(10566);function Button({buttonContent:t,type:e="button",className:n,onClick:s,variant:r="primary",disabled:l=!1,icon:o,rounded:c=!0}){return(0,a.jsxs)("button",{type:e,onClick:s,className:(0,i.Z)("flex w-full items-center justify-center","py-4 text-sm","primary"===r?"bg-white":"bg-black","primary"===r?"text-black":"text-white",l&&"primary"===r?"bg-gray-400":null,l&&"secondary"===r?"bg-boat-color-gray-900":null,c?"rounded-full":null,n),disabled:l,children:[o?a.jsx("span",{className:"mr-2",children:o}):null,t]})}}};